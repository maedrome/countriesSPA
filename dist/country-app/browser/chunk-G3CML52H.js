import{U as g,Z as l,b as i,d as c,e as n,f as h,p as a}from"./chunk-AC22RVTI.js";var b=(()=>{let e=class e{constructor(){this.url="https://restcountries.com/v3.1/",this.countries=a([]),this.country=a(void 0),this.http=h(g),this.router=h(l),this.isLoading=a(!1),this.cacheStorage={capital:{term:"",data:[]},name:{term:"",data:[]},region:{data:[]}},this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStorage",JSON.stringify(this.cacheStorage))}loadFromLocalStorage(){localStorage.getItem("cacheStorage")&&(this.cacheStorage=JSON.parse(localStorage.getItem("cacheStorage")))}searchCountries(r,t){this.isLoading.set(!0),this.searchSuscription?.unsubscribe(),this.searchSuscription=this.http.get(`${this.url}${t}/${r}`).pipe(i(o=>(console.log(o),this.countries.set([]),this.isLoading.set(!1),[])),c(o=>{this.cacheStorage[t].data=o,this.cacheStorage[t].term=r}),c(()=>this.saveToLocalStorage())).subscribe(o=>{this.countries.set(o),this.isLoading.set(!1)})}getCountryByCode(r){this.http.get(`${this.url}alpha/${r}`).pipe(i(t=>(console.log(t),this.router.navigateByUrl(""),[]))).subscribe(t=>{this.country.set(t[0])})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();export{b as a};
